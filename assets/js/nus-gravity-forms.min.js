"use strict";function hasClass(e,t){return e.classList?e.classList.contains(t):new RegExp("\\b"+t+"\\b").test(e.className)}function addClass(e,t){e.classList?e.classList.add(t):hasClass(e,t)||(e.className+=" "+t)}function removeClass(e,t){e.classList?e.classList.remove(t):e.className=e.className.replace(new RegExp("\\b"+t+"\\b","g"),"")}function setActiveClass(){document.querySelectorAll(".gform_fields li:not(.col-wrapper)").forEach(function(e){var t=e.querySelector("input");t&&t.value&&addClass(e,"form__group--active");var a=e.querySelector("select");a&&a.value&&addClass(e,"form__group--active")})}function validateName(e){var t="english"===(1<arguments.length&&void 0!==arguments[1]?arguments[1]:"english")?"<span>Please enter a valid name.</span> Must contains only letters and hyphens.":"<span>Por favor introduzca un nombre válido.</span> Debe contener solo letras y guiones.";1<e.value.length&&/^[A-Za-z, .-]+$/i.test(e.value)?fieldValid(e):fieldNotValid(e,t)}function validateEmail(e){var t="english"===(1<arguments.length&&void 0!==arguments[1]?arguments[1]:"english")?"<span>Please enter a valid email address.</span> e.g.: example@website.com":"<span>Por favor, introduzca una dirección de correo electrónico válida.</span> ej.: ejemplo@website.com";1<e.value.length&&/^\w+([+.-]?\w+)*@\w+([.-]?\w+)*(\.\w{2,3})+$/.test(e.value)?fieldValid(e):fieldNotValid(e,t)}function validatePhone(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"english",a=document.querySelector(".nus-live-validation--country select"),o="english"===t?"<span>Please enter a valid phone number.</span>":"<span>Por favor introduzca un número de teléfono válido.</span>",i=/^(\+?1-?)?(\([2-9]([02-9]\d|1[02-9])\)|[2-9]([02-9]\d|1[02-9]))-?[2-9]([02-9]\d|1[02-9])-?\d{4,15}$/,n="english"===t?"Only digits, hyphens, and spaces.":"Solo dígitos, guiones y espacios";null!==a&&"1"!==a.value||(i=/^(\+?1-?)?(\([2-9]([02-9]\d|1[02-9])\)|[2-9]([02-9]\d|1[02-9]))-?[2-9]([02-9]\d|1[02-9])-?\d{4}$/,n="english"===t?"Only 10 digits, hyphens, and spaces.":"Solo 10 dígitos, guiones y espacios"),0<e.value.length&&i.test(e.value)?fieldValid(e):fieldNotValid(e,"".concat(o," ").concat(n))}function validatePhoneStrict(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"english",a=document.querySelector(".country-code--select select"),o=!0,i="english"===t?"<span>Please enter a valid phone number.</span>":"<span>Por favor introduzca un número de teléfono válido</span>";e.value?a&&""!==a.value?"1"!==a.value||/^\d{10}$|^$/.test(e.value)?e.value&&/^\d{5,}$|^$/.test(e.value)||(o=!1,fieldNotValid(e,i)):(o=!1,fieldNotValid(e,"".concat(i," Please enter 10 digits."))):/^\d{10}$|^$/.test(e.value)||(o=!1,fieldNotValid(e,i)):(o=!1,fieldNotValid(e,i)),!1===o&&/[^0-9]/.test(e.value)&&fieldNotValid(e,"".concat(i," No special characters allowed.")),o&&fieldValid(e)}function validateZip(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:"english",a="english"===t?"Please enter a valid zip":"Por favor introduzca un código postal válido.",o="english"===t?"5 digits, numbers only":"5 dígitos, solo números.";/^\d{5}$/.test(e.value)?"00000"===e.value?fieldValid(e):validateZipViaUSPS(e,a):fieldNotValid(e,"<span>".concat(a,"</span> ").concat(o))}function validateZipViaUSPS(a,o){var e='<CityStateLookupRequest USERID="951NATIO1026"><ZipCode ID="0"><Zip5>'.concat(a.value,"</Zip5></ZipCode></CityStateLookupRequest>");axios({method:"get",timeout:750,url:"https://secure.shippingapis.com/ShippingApi.dll?API=CityStateLookup&XML="+e}).then(function(e){if(200!==e.status)throw new Error(e.statusText);return(new window.DOMParser).parseFromString(e.data,"text/xml")}).then(function(e){if(e.querySelector("Error")){var t=e.querySelector("Description").innerHTML;fieldNotValid(a,"<span>".concat(o,".</span> ").concat(t))}else fieldValid(a),populateZipRelatedFields(e,a)}).catch(function(e){validateZipViaDB(a,o)})}function validateZipViaDB(t,a){axios({method:"post",url:NuAjaxObject.ajax_url,data:Qs.stringify({action:"zip_lookup",zipValue:t.value})}).then(function(e){if(200!==e.status)throw new Error(e.statusText);if(!e.data.success)throw new Error(e.data.data);fieldValid(t),populateZipRelatedFields(e.data.data,t)}).catch(function(e){fieldNotValid(t,"<span>".concat(a,".</span> ").concat(e.message))})}function populateZipRelatedFields(e,t){var a=t.closest("form"),o="";if(void 0!==e.state?o=e.state:e.querySelector("State")&&(o=e.querySelector("State").innerHTML),o&&a){var i=a.querySelector(".gfield.state input");i&&"hidden"===i.getAttribute("type")&&(i.value=o)}}function fieldValid(e){e.parentNode.classList.contains("gfield_error")&&e.parentNode.classList.remove("gfield_error"),e.parentNode.classList.add("gfield_correct"),jQuery('.gfield_correct [data-toggle="tooltip"]').tooltip("dispose")}function fieldNotValid(e,t){e.parentNode.classList.remove("gfield_correct"),e.parentNode.classList.add("gfield_error"),e.setAttribute("data-toggle","tooltip"),e.setAttribute("data-html","true"),e.setAttribute("title",t),e.setAttribute("data-placement","top"),e.setAttribute("data-original-title",t),e.setAttribute("data-template",'<div class="tooltip tooltip--error" role="tooltip"><div class="arrow"></div><div class="tooltip-inner"></div></div>'),jQuery('.gfield_error [data-toggle="tooltip"]:focus').tooltip("show")}function runValidation(e){if(null!==e.target.parentNode){var t=e.target.parentNode.classList,a="es"===document.querySelector("html").getAttribute("lang")?"spanish":"english";t.contains("nus-live-validation--name")?validateName(e.target,a):t.contains("nus-live-validation--email")?validateEmail(e.target,a):t.contains("nus-live-validation--phone")?validatePhone(e.target,a):t.contains("nus-live-validation--phone-strict")?validatePhoneStrict(e.target,a):t.contains("nus-live-validation--zip")&&validateZip(e.target,a)}}!function(i){i.addEventListener("click",function(e){if(e.target&&e.target.closest(".gform_footer button")){console.log(e.target.closest("form"));var t=e.target.closest("form").querySelector("li.track input");t&&""===t.value&&(t.value="rfi_nu.edu")}}),i.addEventListener("submit",function(e){if(e.target&&e.target.id.startsWith("gform")){var t=i.getElementById(e.target.id),a=t.querySelector('input[type="submit"]')||t.querySelector(".gform_footer button"),o=a.querySelector(".icon--arrow-right");a.setAttribute("disabled","disabled"),o&&(o.classList.remove("icon--arrow-right"),o.classList.add("icon--spin"))}})}(document,jQuery),function(e,t,l){l(function(){var o,i,n;e.degreeSelect=function(e,t,a){l.ajax({type:"POST",url:NuAjaxObject.ajax_url,data:{degree:e,modifyPrograms:a,action:"degree_select"},success:function(e){switch(l(".program--select select").prop("disabled",!1),l(".program--select").removeClass("disabled"),t){case"initial":l(".program--select select").find('option:not([disabled="disabled"])').remove(),l(e).appendTo(".program--select select");break;case"repeat":l(e).appendTo(".program--select select"),l(".program--select select").val(i),l(".country-code--select select").val(n),setActiveClass()}!0===a&&l(".program--select select").append('<optgroup label="" class="d-none"></optgroup>')}})},l(t).on("change",".program--select select",function(){i=l(".program--select select").val()}),l(t).on("change",".country-code--select",function(){n=l(".country-code--select select").val()}),l(function(){n=l(".country-code--select select").val()}),l(t).on("change",".degree--select select",function(){l("body").hasClass("modify-true")&&(o=!0),l(".program--select select").prop("disabled",!0),l(".program--select").addClass("disabled");var e=l(this).children("option").filter(":selected").text();l(".program--select select").find('option:not([disabled="disabled"])').remove(),degreeSelect(e,"initial",o)}),l(t).on("gform_post_render",function(e,t){l("#gform_ajax_frame_"+t).attr("src","about:blank");var a=l(".degree--select select option:selected").val();degreeSelect(a,"repeat",o),l(".gfield_error input, .gfield_error select").attr("aria-invalid","true"),l("#gform_wrapper_"+t).hasClass("gform_validation_error")&&l("#gform_"+t+" .validation_error").html('<span class="heading--four">There was a problem with your submission.</span> Errors have been highlighted below.')})})}(window,document,jQuery),function(e,i){var n=i(".iso-country-code input, input.iso-country-code"),l=i(".country-name input, input.country-name");(n.length||l.length)&&i(e).on("change",".country-code--select select",function(){var e=i(this).children("option").filter(":selected"),t=e.data("iso-country-code"),a=e.data("country-name");n.length&&n.val(t),l.length&&l.val(a);var o=i(".form__group--zip");!o.length||"US"===t&&"USA"===a?o.length&&(o.find("input").val(""),o.removeClass("form__group--active")):(o.find("input").val("00000"),o.addClass("form__group--active"))})}(document,jQuery),document.addEventListener("keyup",function(e){runValidation(e)}),document.addEventListener("focus",function(e){runValidation(e)}),document.addEventListener("click",function(e){runValidation(e)}),document.addEventListener("change",function(e){var t=document.querySelector(".nus-live-validation--phone-strict input");e.target.parentNode.classList.contains("country-code--select")&&validatePhoneStrict(t),(e.target.parentNode.classList.contains("degree--select")||e.target.parentNode.classList.contains("program--select"))&&("undefined"!==e.target.value?e.target.parentNode.classList.add("gfield_correct"):e.target.parentNode.classList.remove("gfield_correct")),e.target.parentNode.classList.contains("degree--select")&&e.target.parentNode.classList.contains("gfield_error")&&e.target.parentNode.classList.remove("gfield_error")}),function(e){e(function(){e('[data-tool="#military-tooltip"]').tooltip({template:'<div class="tooltip tooltip--military" role="tooltip"><div class="arrow"></div><div class="tooltip-inner"></div></div>',container:".form__group--military"})})}(jQuery),function(e){var t=new Date,a=["JAN","FEB","MAR","APR","MAY","JUNE","JUL","AUG","SEP","OCT","NOV","DEC"][t.getMonth()],o=t.getFullYear(),i=e.querySelectorAll(".form__group--month select"),n=e.querySelectorAll(".form__group--year select");i.length&&i.forEach(function(e){e.value=a,e.dispatchEvent(new Event("change"))}),n.length&&n.forEach(function(e){e.value=o,e.dispatchEvent(new Event("change"))}),setActiveClass();var l=e.querySelectorAll(".gform_body input:not(.gform_hidden), .gform_body select:not(.gform_hidden)");l.length&&l.forEach(function(e){e.addEventListener("change",function(){e.closest("li").classList.add("form__group--active")})})}(document);
//# sourceMappingURL=nus-gravity-forms.min.js.map